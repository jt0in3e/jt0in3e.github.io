<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Getting background removal in OBS on VoidLinux (and any other GNU/Linux-based distro) - Технічно технічний блог</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="Getting background removal in OBS on VoidLinux (and any other GNU/Linux-based distro)"><meta itemprop=description content="Plugin obs-backgroundremoval"><meta itemprop=datePublished content="2023-05-30T20:13:00+02:00"><meta itemprop=dateModified content="2024-08-16T14:07:01+02:00"><meta itemprop=wordCount content="945"><meta itemprop=keywords content="General,Obs,Build,Instal,Compile,Plugins,Voidlinux"><meta property="og:url" content="https://jt0in3e.github.io/2023/05/getting-background-removal-in-obs-on-voidlinux-and-any-other-gnu/linux-based-distro/"><meta property="og:site_name" content="Технічно технічний блог"><meta property="og:title" content="Getting background removal in OBS on VoidLinux (and any other GNU/Linux-based distro)"><meta property="og:description" content="Plugin obs-backgroundremoval"><meta property="og:locale" content="uk"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-30T20:13:00+02:00"><meta property="article:modified_time" content="2024-08-16T14:07:01+02:00"><meta property="article:tag" content="General"><meta property="article:tag" content="Obs"><meta property="article:tag" content="Build"><meta property="article:tag" content="Instal"><meta property="article:tag" content="Compile"><meta property="article:tag" content="Plugins"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting background removal in OBS on VoidLinux (and any other GNU/Linux-based distro)"><meta name=twitter:description content="Plugin obs-backgroundremoval"><link rel=stylesheet type=text/css media=screen href=https://jt0in3e.github.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://jt0in3e.github.io/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://jt0in3e.github.io/css/dark.css><script src=https://jt0in3e.github.io/js/feather.min.js></script><script src=https://jt0in3e.github.io/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://jt0in3e.github.io/>Технічно технічний блог</a></h1><div class=site-description><p>Деякі експеременти, щось з програмування, щось із пізнання та дійсност</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/jt0in3e title=Github><i data-feather=github></i></a></li><li><a href=/index.xml title=RSS><i data-feather=rss></i></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Берлога</a></li><li><a href=/posts>Усі нариси</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>30</span>
<span class=rest>May 2023</span></div></div><div class=matter><h1 class=title>Getting background removal in OBS on VoidLinux (and any other GNU/Linux-based distro)</h1></div></div><aside class=toc><header><h2>Contents</h2></header><nav id=TableOfContents><ol><li><a href=#tldr>TLDR;</a></li><li><a href=#obs>OBS</a></li><li><a href=#obs-plugin-to-remove-background-obs-backgroundremovalhttpsgithubcomroyshilobs-backgroundremoval>OBS plugin to remove background: <a href=https://github.com/royshil/obs-backgroundremoval>obs-backgroundremoval</a></a></li><li><a href=#some-info-on-the-subject-of-background-removal>Some info on the subject of background removal</a><ol><li><a href=#why-are-movie-scenes-shot-with-green-background-hit-it-offhttpsmoviesstackexchangecomquestions52597why-are-movie-scenes-shot-with-green-background>Why are movie scenes shot with green background? (<a href=https://movies.stackexchange.com/questions/52597/why-are-movie-scenes-shot-with-green-background>hit it off</a>)</a></li><li><a href=#virtual-background-amending-andor-removal>Virtual background: amending and/or removal</a></li></ol></li></ol></nav></aside><div class=markdown><div class=date><span><b>published:</b> <u>May 30, 2023</u>, <b><i>updated:</i></b> <i>August 16, 2024; 14:07</i></span></div><h2 id=tldr>TLDR;</h2><p>Building, compiling and installing plugin <code>obs-backgroundremoval</code> of <em>OBS</em> studio to remove &lsquo;virtual&rsquo; background without using &lsquo;real&rsquo; green background. The procedure was made on VoidLinux with <code>cmake</code>, <code>make</code>, <code>pyenv</code>, <code>git</code>, but should work on any linux distro.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> ~/Downloads
</span></span><span style=display:flex><span>git clone https://github.com/royshil/obs-backgroundremoval
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> obs-backgroundremoval
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pyenv install 3.9.1 
</span></span><span style=display:flex><span>sudo xbps-install -S obs obs-devel cmake make
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mkdir build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cmake -DCMAKE_BUILD_TYPE<span style=color:#ff79c6>=</span>Release -DCMAKE_INSTALL_PREFIX<span style=color:#ff79c6>=</span>/usr -DLINUX_PORTABLE<span style=color:#ff79c6>=</span>OFF -S . -B build 
</span></span><span style=display:flex><span>cmake --build build 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cmake --install build --prefix /usr
</span></span></code></pre></td></tr></table></div></div><h2 id=obs>OBS</h2><p>Free and open source software for video recording and live streaming.<a href=https://obsproject.com>bam</a></p><h2 id=obs-plugin-to-remove-background-obs-backgroundremovalhttpsgithubcomroyshilobs-backgroundremoval>OBS plugin to remove background: <a href=https://github.com/royshil/obs-backgroundremoval>obs-backgroundremoval</a></h2><p>An OBS plugin for removing background in portrait images (video), making it easy to replace the background when screen recording.</p><p>There are instructions and precompiled packages for some platrforms (Mac OS, Windows, Linux), but for some Linux-based platrforms there are neither instructions, nor precompeled packages.</p><p>We can use general building, compiling and installing instructions to make this plugin available on the platrforms not listed. For this we&rsquo;ll use <a href=https://cmake.org/cmake/help/latest/guide/tutorial/Installing%20and%20Testing.html><code>cmake</code></a> since the project is built on C++. Let&rsquo;s go.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6272a4># clone plugin</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> ~/Downloads
</span></span><span style=display:flex><span>git clone https://github.com/royshil/obs-backgroundremoval
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> obs-backgroundremoval
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># required libs/packages</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># - python &gt;= 3.9.1</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># - OBS studio &gt;=28</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># - OBS dev library (&#39;libobs&#39; or &#39;obs-dev&#39; or &#39;obs-devel&#39; depending on distributive packages&#39; naming)</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># - cmake; &#39;cmake&#39; generator has to be &#39;Unix Makefiles&#39;</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># - make</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># for setting and using required python version we can use [`pyenv`](https://github.com/pyenv/pyenv)</span>
</span></span><span style=display:flex><span>pyenv install 3.9.1 <span style=color:#6272a4>#if you have a problem of finding correct (new) version of python, try to update &#39;pyenv&#39; by pulling changes from the repo or using [pyenv&#39;s plugin](https://github.com/pyenv/pyenv-update)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># because we&#39;re building and compiling package on [VoidLinux](https://voidlinux.org/), the &#39;xbps&#39; packages manager is used. for any other platforms the respective package manager should be used</span>
</span></span><span style=display:flex><span>sudo xbps-install obs obs-devel cmake make
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>#make a build folder to build </span>
</span></span><span style=display:flex><span>mkdir build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>#configure &#39;cmake&#39; (thanks to these resources and answers it has been managed how to do: [1](https://stackoverflow.com/questions/67425557/how-do-i-build-a-cmake-project) [2](https://www.cyberciti.biz/faq/howto-compile-and-run-c-cplusplus-code-in-linux/) [3](https://www.poftut.com/cmake-tutorial-to-build-and-compile-in-linux/) [4](https://cmake.org/cmake/help/latest/guide/tutorial/Installing%20and%20Testing.html#getting-started)</span>
</span></span><span style=display:flex><span>cmake -DCMAKE_BUILD_TYPE<span style=color:#ff79c6>=</span>Release -DCMAKE_INSTALL_PREFIX<span style=color:#ff79c6>=</span>/usr -DLINUX_PORTABLE<span style=color:#ff79c6>=</span>OFF -S . -B build <span style=color:#6272a4>#configs options are also extraxted from a building script &#39;build-linux.zsh&#39; located in the project&#39;s folder &#39;.github/scripts/&#39;</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>#build executables and libs</span>
</span></span><span style=display:flex><span>cmake --build build <span style=color:#6272a4>#the latter is a folder</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>#and finally install</span>
</span></span><span style=display:flex><span>sudo cmake --install build --prefix /usr
</span></span></code></pre></td></tr></table></div></div><p>After installation &lsquo;background removal&rsquo; will be available as a filter of capture source.</p><h2 id=some-info-on-the-subject-of-background-removal>Some info on the subject of background removal</h2><h3 id=why-are-movie-scenes-shot-with-green-background-hit-it-offhttpsmoviesstackexchangecomquestions52597why-are-movie-scenes-shot-with-green-background>Why are movie scenes shot with green background? (<a href=https://movies.stackexchange.com/questions/52597/why-are-movie-scenes-shot-with-green-background>hit it off</a>)</h3><p>Green is currently used as a backdrop more than any other color because image sensors in digital video cameras are most sensitive to green, due to the bayer pattern allocating more pixels to the green channel, mimicking the human eye&rsquo;s increased sensitivity to green light. Therefore, the green camera channel contains the least &ldquo;noise&rdquo; and can produce the cleanest key/matte/mask. Additionally, less light is needed to illuminate green, again because of the higher sensitivity to green in image sensors. Bright green has also become favored since a blue background may match a subject&rsquo;s eye color or common items of clothing such as jeans.(<a href=https://movies.stackexchange.com/a/52600>link</a>)</p><h3 id=virtual-background-amending-andor-removal>Virtual background: amending and/or removal</h3><p><a href=https://www.pcmag.com/encyclopedia/term/virtual-background>virtual background</a> - A simulated environment that appears behind a participant in a video conference. A virtual background can make it appear that people are at the beach, a famous landmark or even outer space.</p><h4 id=popular-background-removal-techniqueshttpswwwanalyticsvidhyacomblog202107learn-how-to-do-real-time-background-replacement-using-opencv-and-cvzone><a href=https://www.analyticsvidhya.com/blog/2021/07/learn-how-to-do-real-time-background-replacement-using-opencv-and-cvzone/>Popular background removal techniques</a></h4><p>Image clipping path – This technique is used if the subject of the image has sharp edges. All those elements that fall outside the path will be eliminated.</p><p>Image cut-out – Here we cut the required region or subject in a frame and remove the background.</p><p>Image masking – If the images have frills or fine edges we can use image masking techniques.</p><p>Erasing the background – Erasing the background of an image using any different tools</p><p>Many famous applications use a background removal technique and replace it with a custom one.</p><h4 id=how-automatic-image-background-removal-workshttpswwwwithoutbgcomresourceshow-automatic-image-background-removal-works><a href=https://www.withoutbg.com/resources/how-automatic-image-background-removal-works>How Automatic Image Background Removal Works</a></h4><p>The technical term for image background removal is image matting or alpha matting, whereby the original background is removed from a still image or video using one of several techniques.</p><p>An image can be modeled as a combination of foreground F and background B using an alpha matte $\alpha$:</p><p>$$ \begin{equation}I_{i}=\alpha_{i} F_{i}+\left(1-\alpha_{i}\right) B_{i} \quad \alpha_{i} \in[0,1]\end{equation} $$</p><p>The alpha matte encodes the transparency of each pixel in an image, with white representing opaque pixels (foreground), black representing transparent pixels (background), and grayscale values representing intermediate transparency levels. When creating a composite image, the alpha matte guides the process of blending the foreground object with the new background, using the intermediate transparency levels to achieve a seamless and realistic composite image.</p><p>The alpha matte is a matrix of transparency values ranging from 0 to 1. A value of 0 represents complete transparency (background), and 1 represents complete opacity (foreground). The intermediate values between 0 and 1 correspond to levels of partial opacity, representing the pixels in the transition region.</p><h5 id=traditional-techniques-vs-deep-learning>Traditional Techniques VS Deep Learning</h5><p>Background removal techniques have evolved over time, with traditional methods relying on handcrafted features and mathematical models to separate foreground and background pixels. While these methods can be effective, they may require significant human intervention, and their accuracy can be limited by their dependence on these predetermined features.</p><p>However, deep learning methods can also require a large amount of training data and computing power, and their results may be difficult to interpret or explain. Traditional methods may still be useful in certain situations or when human intervention is necessary.</p><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><div id=comment-section></div><script>initComments({node:document.getElementById("comment-section"),defaultHomeserverUrl:"https://matrix.cactus.chat:8448",serverName:"cactus.chat",siteName:"jt0in3e",commentSectionId:"obs-backremove-voidlinux",updateInterval:180})</script></div><div class=tags><ul class=flat><li class=tag-li><a href=/tags/general>general</a></li><li class=tag-li><a href=/tags/obs>obs</a></li><li class=tag-li><a href=/tags/build>build</a></li><li class=tag-li><a href=/tags/instal>instal</a></li><li class=tag-li><a href=/tags/compile>compile</a></li><li class=tag-li><a href=/tags/plugins>plugins</a></li><li class=tag-li><a href=/tags/voidlinux>voidlinux</a></li></ul></div><div class=back><a href=https://github.com/jt0in3e/jt0in3e.github.io/blob/master/content/posts/post-14/index.md title=github><i data-feather=github></i> Edit this on GitHub</a></div><div class=back><a href=https://jt0in3e.github.io/><span aria-hidden=true>← Back</span></a></div><div class=back>Next time, we'll talk about <i>"10 Reasons why gcc SHOULD be re-written in JavaScript - You won't believe #8!"</i></div></div></div><div class="footer wrapper"><nav class=nav><div>2023 © J:a.k.a:Y</nav></div><script>feather.replace()</script></body></html>